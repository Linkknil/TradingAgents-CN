# 环境配置说明

## 环境变量配置

在项目根目录创建 `.env` 文件，包含以下配置：

```bash
# ===================
# 大模型提供商配置
# ===================
# 提供商选择: deepseek / qwen
PROVIDER=deepseek

# DeepSeek 配置
DEEPSEEK_MODEL=deepseek-chat
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
DEEPSEEK_API_KEY=your_deepseek_api_key_here

# 通义千问配置
QWEN_MODEL=qwen-plus
QWEN_BASE_URL=https://dashscope-intl.aliyuncs.com/compatible-mode/v1
DASHSCOPE_API_KEY=your_dashscope_api_key_here

# ===================
# 模型参数配置
# ===================
TEMPERATURE=0.8
TIMEOUT_S=60
MAX_TOKENS=2048

# ===================
# Embedding 配置
# ===================
EMBEDDING_API_KEY=your_embedding_api_key_here
EMBEDDING_BASE_URL=https://api.deepseek.com/v1
EMBEDDING_MODEL=text-embedding-3-large

# ===================
# RAG 配置
# ===================
DATA_DIR=data
CHROMA_DIR=chroma_db
COLLECTION_NAME=kb-main

# ===================
# 记忆管理配置
# ===================
# 记忆类型: buffer / summary / summary_buffer / vector
MEMORY_TYPE=buffer

# 混合记忆配置
MEMORY_MAX_TOKEN_LIMIT=1000

# 向量记忆配置
MEMORY_RETRIEVER_K=5
```

## 快速开始

1. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

2. **配置环境变量**
   ```bash
   cp 环境配置说明.md .env
   # 编辑 .env 文件，填入你的 API Key
   ```

3. **启动服务**
   ```bash
   uvicorn app.main:app --host 0.0.0.0 --port 8000
   ```

4. **测试记忆功能**
   ```bash
   python test_memory.py
   ```

## 记忆类型切换

通过修改 `MEMORY_TYPE` 环境变量来切换记忆类型：

- `buffer`: 基础缓冲记忆（默认）
- `summary`: 摘要记忆
- `summary_buffer`: 混合记忆
- `vector`: 向量记忆

重启服务后生效。
